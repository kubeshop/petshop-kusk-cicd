openapi: 3.0.3
info:
  title: Simple API to validate Kusk Extensions
  description: Sample API which can be deployed to Kubernetes using Kusk extension
  version: 0.0.1
  contact:
    name: Frank Kilcommins
    email: frank.kilcommins@smartbear.com
  license:
    name: Apache
    url: http://localhost/licenses
paths:
  "/pet":
    put:
      tags:
      - pet
      summary: Update an existing pet
      description: Update an existing pet by Id
      operationId: updatePet
      requestBody:
        description: Update an existent pet in the store
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/Pet"
          application/xml:
            schema:
              "$ref": "#/components/schemas/Pet"
          application/x-www-form-urlencoded:
            schema:
              "$ref": "#/components/schemas/Pet"
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/xml:
              schema:
                "$ref": "#/components/schemas/Pet"
            application/json:
              schema:
                "$ref": "#/components/schemas/Pet"
        '400':
          description: Invalid ID supplied
        '404':
          description: Pet not found
        '405':
          description: Validation exception
        default:
          description: Get Pet response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pet'
    post:
      tags:
      - pet
      summary: Add a new pet to the store
      description: Add a new pet to the store
      operationId: addPet
      requestBody:
        description: Create a new pet in the store
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/Pet"
          application/xml:
            schema:
              "$ref": "#/components/schemas/Pet"
          application/x-www-form-urlencoded:
            schema:
              "$ref": "#/components/schemas/Pet"
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/xml:
              schema:
                "$ref": "#/components/schemas/Pet"
            application/json:
              schema:
                "$ref": "#/components/schemas/Pet"
        '405':
          description: Invalid input
        default:
          description: Get Pets response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pets'
  "/pet/findByStatus":
    get:
      tags:
      - pet
      summary: Finds Pets by status
      description: Multiple status values can be provided with comma separated strings
      operationId: findPetsByStatus
      parameters:
      - name: status
        in: query
        description: Status values that need to be considered for filter
        required: false
        explode: true
        schema:
          type: string
          default: available
          enum:
          - available
          - pending
          - sold
      responses:
        '200':
          description: successful operation
          content:
            application/xml:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/Pet"
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/Pet"
        '400':
          description: Invalid status value
        default:
          description: Get Pets response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pets'
  "/pets":
    x-kusk:
      disabled: false
      timeouts:
        request_timeout: 60
    get:
      operationId: getPets
      description: Get the pets available in the store
      x-kusk:
        disabled: true
      responses:
        '200':
          description: Get Pets response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pets'  
        default:
          description: Get Pets response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pets'  
components:
  schemas:
    Pet:
      type: object
      properties:
        name:
          type: string
          description: the name of the pet
          example: Rover
        color:
          type: string
          description: the color of the pet
          example: yellow
        age:
          type: integer
          description: the age in years of the pet
          example: 17
        eyeColor:
          type: string
          description: the eye color of the pet
          example: green
    Pets:
      type: array
      items:
        $ref: '#/components/schemas/Pet'
x-kusk:
  disabled: false
  cors:
    origins:
      - http://foo.example
      - http://bar.example
    methods:
      - POST
      - GET
      - OPTIONS
    headers:
      - Content-Type
    expose_headers:
      - X-Custom-Header
    max_age: 86400
  credentials: true
  upstream:
    service:
      name: petstore
      namespace: default
      port: 8081
  path:
    base: /petstore/api/v3
    trim_prefix: /petstore
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/frank-kilcommins/Kusk-Pets-API/0.0.1